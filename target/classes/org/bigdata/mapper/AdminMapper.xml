<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
    <mapper namespace="org.bigdata.mapper.AdminMapper">
    
    <!-- 상의 등록  -->
    <insert id="productCoat" >
    	insert into shopping_coat(coatNumber,coatKey,coatName,coatPrice,coatStock,coatDiscount,coatContents,regDate)
    				values(seq_coatkey.nextval,#{coatKey},#{coatName},#{coatPrice},#{coatStock},#{coatDiscount},#{coatContents},sysdate)
    </insert>
    
    <!-- 상의 이미지 등록 -->
    <insert id="productCoatImage">
    	insert into shopping_coatImage(coatNumber,fileName,uploadPath,uuid)
    		values(#{coatNumber},#{fileName},#{uploadPath},#{uuid})
    </insert>
 
 	<!-- 상의 상품 상세보기 -->
 	<select id="productGetDetail" resultType="org.bigdata.domain.CoatVO">
 		select * from shopping_coat where coatNumber = #{coatNumber}
 	</select>
 	
 	<!--상의 상품 수정하기  -->
 	<update id="productCoatUpdate">
 	
 		update shopping_coat set 
 					coatKey = #{coatKey},
 					coatName = #{coatName},
 					coatPrice = #{coatPrice},
 					coatStock = #{coatStock},
 					coatDiscount = #{coatDiscount},
 					coatContents = #{coatContents},
 					updateDate = sysdate
 			where coatNumber = ${coatNumber}
 	</update>
 	
 	<!-- 상의 상품 삭제하기  -->
 	<delete id="productCoatDelete">
 		delete from shopping_coat where coatNumber = #{coatNumber}
 	</delete>
 
    <!--페이징 처리 적용 상의 리스트 -->
    <select id="productCoatGetList"
			resultType="org.bigdata.domain.CoatVO">
		<![CDATA[
			select coatNumber,coatKey,coatName,coatPrice,coatStock,coatDiscount,coatContents,regdate,updatedate
			  from (select /*+ INDEX_DESC(shopping_coat pk_coat) */
			               rownum rn,coatNumber,coatKey,coatName,coatPrice,coatStock,coatDiscount,coatContents,regdate,updatedate
			     from shopping_coat
			     where 
			
		]]> 
		 		<if test="keyword != null">
	      			 coatName like '%' || #{keyword} || '%' and
	      		</if>
	      
	    <![CDATA[	
	   			 rownum <= #{pageNum} * #{amount}
			     )
			 where rn > (#{pageNum} -1) * #{amount}
	               
		]]>
	</select>
  
  
  
	<!-- 상의 총 개수 -->
	<select id="productCoatGetTotal" resultType="int">
		select count(*) 
	      from shopping_coat
	      
	      <if test="keyword != null">
	      	where coatName like '%' || #{keyword} || '%'
	      </if>
	</select>
	   
    
    
    
    
    <insert id="productPants">
    	insert into shopping_pants(pantsId,pantsName,pantsPrice,pantsStock,pantsDiscount,pantsContents)
    				values(seq_pants.nextval,#{pantsId},#{pantsName},#{pantsPrice},#{pantsStock},#{pantsDiscount},#{pantsContents})
    </insert>
    
    <insert id="productShoes">
    	insert into shopping_shoes(shoesId,shoesName,shoesPrice,shoesStock,shoesDiscount,shoesContents)
    				values(seq_shoes.nextval,#{shoesId},#{shoesName},#{shoesPrice},#{shoesStock},#{shoesDiscount},#{shoesContents})
    </insert>
    						  
    
    </mapper>